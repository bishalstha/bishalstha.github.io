const projects = [
  {
    id: 1,
    title: 'EnthuZiastic',
    description: 'Education technology where you can hire or teach anything you can wish for.',
    techStack: [
      'Flutter',
      'iOS',
      'Android',
      'Zoom SDK',
      'GetStream Chat SDK',
    ],
    type: 'Flutter App',
    pics: [
      {
        path: 'resources/img/enthu1.webp',
        tag: 'EnthuZiastic screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/enthu2.webp',
        tag: 'EnthuZiastic screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/enthu3.webp',
        tag: 'EnthuZiastic screenshot',
        sizeClass: 'pic-mobile',
      },
    ],
    link: 'https://enthu.com',
  },
  {
    id: 2,
    title: 'HoyHoy',
    description: 'Audio-video calling app for the society/apartments where people can easily get in touch with their neighbors, apartment maintaining personnel, and other workers from one place.',
    techStack: [
      'iOS',
      'WebRTC',
      'NodeJS',
      'STUN/TURN',
      'Signaling Server',
      'Socket programming',
      'I made the app, the signaling server and setup the TURN server and signaling server in the cloud server.',
    ],
    type: 'iOS App',
    pics: [
      {
        path: 'resources/img/hoyhoy1.webp',
        tag: 'HoyHoy screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/hoyhoy2.webp',
        tag: 'HoyHoy screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/hoyhoy3.webp',
        tag: 'HoyHoy screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/hoyhoy4.webp',
        tag: 'HoyHoy screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/hoyhoy5.webp',
        tag: 'HoyHoy screenshot',
        sizeClass: 'pic-mobile',
      },
    ],
    link: 'https://apps.apple.com/in/app/hoyhoy/id1507992202',
  },
  {
    id: 3,
    title: 'Nepali Kanoon',
    description: 'Nepali law app that allows users to know the current laws related to women, kids, and domestic violence. Also, users can put their query and have a direct chat with the lawyer through this app.',
    techStack: [
      'iOS',
      'I made the iOS version in coalition with the team of LACC Nepal and backend teams.',
    ],
    type: 'iOS App',
    pics: [
      {
        path: 'resources/img/nepali-law1.webp',
        tag: 'Nepali Kanoon screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/nepali-law2.webp',
        tag: 'Nepali Kanoon screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/nepali-law3.webp',
        tag: 'Nepali Kanoon screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/nepali-law4.webp',
        tag: 'Nepali Kanoon screenshot',
        sizeClass: 'pic-mobile',
      },
    ],
    link: 'https://apps.apple.com/us/app/nepali-kanoon/id1544605649',
  },
  {
    id: 4,
    title: 'Ekoplaza',
    description: 'This is a grocery app based on the Netherlands which allows users to get their grocery from their local Ekoplaza store delivered right to their home.',
    techStack: [
      'iOS',
      'Payment Gateways',
      'I helped maintain and add features in the iOS version in coalition with the team of Ekoplaza management and backend teams.',
    ],
    type: 'iOS App',
    pics: [
      {
        path: 'resources/img/ekoplaza1.webp',
        tag: 'Ekoplaza App screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/ekoplaza2.webp',
        tag: 'Ekoplaza App screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/ekoplaza3.webp',
        tag: 'Ekoplaza App screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/ekoplaza4.webp',
        tag: 'Ekoplaza App screenshot',
        sizeClass: 'pic-mobile',
      },
    ],
    link: 'https://apps.apple.com/us/app/ekoplaza/id1179641714',
  },
  {
    id: 5,
    title: 'myCols - cycling climbs',
    description: 'This sporting app is for the hardcore cyclist who wants to track their progress and find information on the nearby mountains/hills for their next cycling journey.',
    techStack: [
      'iOS',
      'Tracking System',
      'I helped maintain and add features in the iOS version in coalition with the team of myCols management and backend teams.',
    ],
    type: 'iOS App',
    pics: [
      {
        path: 'resources/img/mycols1.webp',
        tag: 'myCols App screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/mycols2.webp',
        tag: 'myCols App screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/mycols3.webp',
        tag: 'myCols App screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/mycols4.webp',
        tag: 'myCols App screenshot',
        sizeClass: 'pic-mobile',
      },
    ],
    link: 'https://apps.apple.com/us/app/mycols-cycling-climbs/id327326925',
  },
  {
    id: 6,
    title: 'LoveLock',
    description: 'This dating app is a clone of popular dating apps like tinder. It is a template app that is used for selling to customers who are willing to start their own version of the dating platform.',
    techStack: [
      'iOS',
      'Audio and Video Call',
      'Chat system',
      'In-App purchase',
      'I helped maintain and add features in the iOS version in coalition with the team of Lovelock management and backend teams.',
    ],
    type: 'iOS App',
    pics: [
      {
        path: 'resources/img/lovelock1.webp',
        tag: 'LoveLock App screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/lovelock2.webp',
        tag: 'LoveLock App screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/lovelock3.webp',
        tag: 'LoveLock App screenshot',
        sizeClass: 'pic-mobile',
      },
    ],
    link: 'https://apps.apple.com/us/app/lovelock-app/id1377005827',
  },
  {
    id: 7,
    title: 'Auto Skip Counter',
    description: 'This app uses the phone\'s mic to listen to the background sound(sound detection) in order to count the skipping.',
    techStack: [
      'Android',
      'Kotlin',
      'Digital Sound Processing(DSP)',
      'Google Ads',
      'I created this app as a personal project.',
    ],
    type: 'Android App',
    pics: [
      {
        path: 'resources/img/asc1.webp',
        tag: 'Auto Skip Counter screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/asc2.webp',
        tag: 'Auto Skip Counter screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/asc3.webp',
        tag: 'Auto Skip Counter screenshot',
        sizeClass: 'pic-mobile',
      },
    ],
    link: 'https://play.google.com/store/apps/details?id=com.hirebdev.autoskipcounter',
  },
  {
    id: 8,
    title: 'Toddler Proof(Touch Lock)',
    description: 'This app allows user to lock their screen so they can have a viewing experience without any interruption due to accidental touches.',
    techStack: [
      'Android',
      'Kotlin',
      'Android foreground and accessibility service',
      'I created this app as a personal project.',
    ],
    type: 'Android App',
    pics: [
      {
        path: 'resources/img/tl1.webp',
        tag: 'Toddler Proof(Touch Lock)',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/tl2.webp',
        tag: 'Toddler Proof(Touch Lock)',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/tl3.webp',
        tag: 'Toddler Proof(Touch Lock)',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/tl4.webp',
        tag: 'Toddler Proof(Touch Lock)',
        sizeClass: 'pic-mobile',
      },
    ],
    link: 'https://play.google.com/store/apps/details?id=com.hirebdev.toddlerprooftouchlock',
  },
  {
    id: 9,
    title: 'Steroid tools',
    description: 'This app is currently not maintained. This is a utility app that provides many tools that respect your privacy. It currently has note-taking, pdf-creating, encrypting/decrypting messages, QR scanning, and device information showing features.',
    techStack: [
      'Android',
      'Flutter',
      'Google Ads',
      'In-App purchase',
      'QR Code',
      'Encryption/Decryption',
      'PDF Making',
      'Note taking',
      'I created this app as a personal project.',
    ],
    type: 'Android App',
    pics: [
      {
        path: 'resources/img/st1.webp',
        tag: 'Steroid Tools App screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/st2.webp',
        tag: 'Steroid Tools App screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/st3.webp',
        tag: 'Steroid Tools App screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/st4.webp',
        tag: 'Steroid Tools App screenshot',
        sizeClass: 'pic-mobile',
      },
    ],
    link: 'https://play.google.com/store/apps/details?id=com.steroid_tools',
  },
  {
    id: 10,
    title: 'Alarm+',
    description: 'This is a utility app that provides advance ways to set alarms for many tasks such as medication reminders, daily tasks, etc.',
    techStack: [
      'Android',
      'Jetpack Compose',
      'Alarm Manager',
      'I created this app as a personal project.',
    ],
    type: 'Android App',
    pics: [
      {
        path: 'resources/img/ap1.webp',
        tag: 'Alarm+ screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/ap2.webp',
        tag: 'Alarm+ screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/ap3.webp',
        tag: 'Alarm+ screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/ap4.webp',
        tag: 'Alarm+ screenshot',
        sizeClass: 'pic-mobile',
      },
    ],
    link: 'https://play.google.com/store/apps/details?id=com.bishalstha.alarmPlus',
  },
  {
    id: 11,
    title: 'Basic Video Editor',
    description: 'This is a utility app that provides simple video editing options.',
    techStack: [
      'Android',
      'Jetpack Compose',
      'Media3',
      'Exo Player',
      'I created this app as a personal project.',
    ],
    type: 'Android App',
    pics: [
      {
        path: 'resources/img/bve1.webp',
        tag: 'Basic Video Editor screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/bve2.webp',
        tag: 'Basic Video Editor screenshot',
        sizeClass: 'pic-mobile',
      },
      {
        path: 'resources/img/bve3.webp',
        tag: 'Basic Video Editor screenshot',
        sizeClass: 'pic-mobile',
      },
    ],
    link: 'https://play.google.com/store/apps/details?id=com.bishalstha.basicvideoeditor',
  },
  {
    id: 12,
    title: 'HoyHoy Backend',
    description: 'This is the signaling server for the HoyHoy app. This backend is for signaling the WebRTC\'s SDP information between the peers.',
    techStack: [
      'Backend',
      'WebRTC',
      'MongoDB',
      'NodeJS',
      'STUN/TURN',
      'Socket programming',
      'I made the signaling server and setup the TURN server and signaling server in the cloud server.',
    ],
    type: 'Backend',
    pics: [],
    link: 'https://gdsociety.org/hoy-hoy/',
  },
  {
    id: 13,
    title: 'OpenMic Backend',
    description: 'This is the backend server for the OpenMic app which serves the users data and authentication to the app.',
    techStack: [
      'Backend',
      'MongoDB',
      'NodeJS',
      'ReactJS',
      'I made the server and setup it up in the cloud server.',
    ],
    type: 'Backend',
    pics: [],
  },
];

$(function () {
  // Functions
  const showToast = (message) => {
    const alertBox = $('.alert-box');
    alertBox.text(message);
    alertBox.toggleClass('alert-show');
    setTimeout(() => {
      alertBox.toggleClass('alert-show');
    }, 3000);
  };

  const closeProjectModal = () => {
    $('.project-modal').fadeOut(function (_) {
      $('.modal-content').css('transform', 'translateY(-120%)');
    });
  };

  // Actions
  // Menu button
  $('.menu-icon').on('click', function (ev) {
    ev.preventDefault();
    $('.nav-links').toggleClass('show');
  });

  // Nav links
  $('.nav-link a').on('click', function (ev) {
    $('.nav-links').removeClass('show');
  });

  // Typed functions
  new Typed('#typed', {
    stringsElement: '#typed-strings',
    loop: true,
    typeSpeed: 100,
    backSpeed: 50,
    backDelay: 1500,
  });

  /*--------- Modal Part Starts ---------*/
  // Project clicked
  $('.project').on('click', function (ev) {
    ev.preventDefault();
    const projectId = Number($(this).attr('data-order'));
    if (projectId) {
      const project = projects.filter(p => p.id === projectId)[0];
      if (project) {
        $('.modal-title').text(project.title);
        $('.modal-brief-message').text(project.description);
        $('.tech-stack').text(project.techStack.reduce((pv, cv) => `${pv} ${cv},`, '').slice(0, -1));
        $('.modal-type .modal-tag').text(project.type);
        const imageTags = project.pics.reduce((pv, cv) => `
        ${pv}
        <div class="${cv.sizeClass}"><img src="${cv.path}" alt="${cv.tag}" /></div>
        `, '');
        $('.modal-pics').html(imageTags);
        if (project.link) {
          $('#modal-visit-btn').css('display', 'inline-block');
          $('#modal-visit-btn').attr('data-link', project.link);
        } else {
          $('#modal-visit-btn').css('display', 'none');
        }

        $('.project-modal').fadeIn(function (_) {
          $('.modal-content').css('transform', 'translateY(0)');
        });
      }
    }
  });

  $('.project-modal').on('click', function (ev) {
    ev.preventDefault();
    closeProjectModal();
  });

  // This is to prevent closing of the modal when clicking
  // inside the  content
  $('.modal-content').on('click', function (ev) {
    ev.stopPropagation();
  });

  // Modal visit button clicked
  $('#modal-visit-btn').on('click', function (ev) {
    const projectLink = $(this).attr('data-link');
    if (projectLink) {
      window.open(projectLink, '_blank').focus();
    }
  });

  // Modal close button clicked
  $('#modal-close-btn').on('click', function (ev) {
    ev.preventDefault();
    closeProjectModal();
  });
  /*--------- Modal Part Ends ---------*/

  // Smooth scroll on click
  $('a[href^="#"]').on('click', function (ev) {
    ev.preventDefault();
    $('html, body').animate({
      scrollTop: $($.attr(this, 'href')).offset().top - 100
    }, 400);
  });

  // Form submission
  $('#contact-form-id').on('submit', async function (ev) {
    ev.preventDefault();
    const submitButton = $('#contact-form-id input[type="submit"]');
    const nameComp = $('#contact-name');
    const emailComp = $('#contact-email');
    const messageComp = $('#contact-message');
    const name = nameComp.val();
    const email = emailComp.val();
    const message = messageComp.val();

    const sendHTML = `
    <div style="max-width: 600px;
        padding: 20px;
        margin: auto;
        background-color: rgb(214, 214, 214);
        font-family: Arial, Helvetica, sans-serif;
        border-radius: 5px;">
        <div style="font-size: 20px;
          font-weight: bold;">
          Message from personal page
        </div>
        <div>
          <p>Name: ${name}</p>
          <p>Email: ${email}</p>
          <p>Message: ${message}</p>
        </div>
    `;
    const sendData = {
      subject: 'Message from personal website!',
      html: sendHTML,
      plainText: `Name: ${name},\nEmail: ${email},\n Message: ${message}`,
    };

    submitButton.attr('disabled', 'true');
    try {
      const response = await fetch('https://hirebdev.com/mail/send_message', {
        method: 'POST',
        cache: 'no-cache',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(sendData)
      });
      const data = await response.json();
      if (data && !data.error) {
        showToast('Success!');
      } else {
        showToast('Failed!');
      }
    } catch (err) {
      showToast('Failed!');
      console.log(err);
    }
    submitButton.removeAttr('disabled');
    nameComp.val('');
    emailComp.val('');
    messageComp.val('');
  });

  // Mix it up
  mixitup('.projects');
});